<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AnläggningsID Från Faktura</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="" />

</head>
<body>


<h1>Verktygslåda<h1>
  <h3>Formatera anläggningsID<h3>
    <div></div>
    <input type="text" id="string">
    <button type="button" onclick="clickHandler()">Kopiera</button>

    <h1 id="output">


      <script>
        function clickHandler() {
          var stringToChange = document.getElementById("string")
          var stringValue = stringToChange.value
          var sliced = ""
          var y = 18
          var z = 0
          let j = 0
          var temp = ""
          stringValue = stringValue.replace(/\s+/g, '')
          let stringLength = stringValue.length
          harOmID = stringValue[0] + stringValue[1] + stringValue[2]
          //omradesIdn = "AHBAJBAKBALLALMALSALVAMLAMSANEANGARDARNARSARVASLAVDAVEBDLBDNBEFBGOBHMBJKBJLBJRBKEBLEBMABOOBRGBRLBRSBYGCBRDADDANDAPDFSDOFDRVEBAEBNEKGEKOESJESKFBGFBNFGAFLEFLNFLOFMDFOBFPDFRVFSBGABGAMGBGGBNGDBGIVGNFGTAGTLGTPGVLHALHAMHBGHBOHBYHDGHDLHDSHDVHJMHJNHJOHLBHLDHLJHMDHMHHMMHMRHOFHOGHORHRAHSDHUVHVIINGJMLJNKJRAJUJKAB"
          //omradesIdn = omradesIdn.split('', 3)
          //omradesIdn = "AHB\nAJB\nAKB\nALL\nALM\nALS\nALV\nAML\nAMS\nANE\nANG\nARD\nARN\nARS\nARV\nASL\nAVD\nAVE\nBDL\nBDN\nBEF\nBGO\nBHM\nBJK\nBJL\nBJR\nBKE\nBLE\nBMA\nBOO\nBRG\nBRL\nBRS\nBYG\nCBR\nDAD\nDAN\nDAP\nDFS\nDOF\nDRV\nEBA\nEBN\nEKG\nEKO\nESJ\nESK\nFBG\nFBN\nFGA\nFLE\nFLN\nFLO\nFMD\nFOB\nFPD\nFRV\nFSB\nGAB\nGAM\nGBG\nGBN\nGDB\nGIV\nGNF\nGTA\nGTL\nGTP\nGVL\nHAL\nHAM\nHBG\nHBO\nHBY\nHDG\nHDL\nHDS\nHDV\nHJM\nHJN\nHJO\nHLB\nHLD\nHLJ\nHMD\nHMH\nHMM\nHMR\nHOF\nHOG\nHOR\nHRA\nHSD\nHUV\nHVI\nING\nJML\nJNK\nJRA\nJUJ\nKAB\n"
          //omradesIdn = omradesIdn.replace(/\s+/g, '')
          //console.log(omradesIdn)
          //harDe = omradesIdn.includes(harOmID)

          if (stringValue[33] === 'O' && stringValue[34] === 'm' && stringValue[42] === 'D' && stringValue[43] === ':') {
            stringValue = stringValue.replace(/Anläggnings-ID:/g, '')
            stringValue = stringValue.replace(/Områdes-ID:/g, '')
            omID = stringValue.slice(18, 21)
            stringValue = stringValue.slice(0, 18)
            stringValue = omID + stringValue
          } else if (stringValue !== '7') {
            for (let i = 0; i < stringLength; i++) {
              if(stringValue[j] === '1' && (stringValue[j+11] >= '0' && stringValue[j+11] <= '9') && (stringValue[j+10] >= '0' && stringValue[j+10] <= '9') && (stringValue[j+9] >= '0' && stringValue[j+9] <= '9') && (stringValue[j+8] >= '0' && stringValue[j+8] <= '9') && (stringValue[j+7] >= '0' && stringValue[j+7] <= '9') && (stringValue[j+6] >= '0' && stringValue[j+6] <= '9') && (stringValue[j+5] >= '0' && stringValue[j+5] <= '9') && (stringValue[j+4] >= '0' && stringValue[j+4] <= '9') && (stringValue[j+3] >= '0' && stringValue[j+3] <= '9') && (stringValue[j+2] >= '0' && stringValue[j+2] <= '9') && (stringValue[j+1] >= '0' && stringValue[j+1] <= '9')) {
                stringValue = stringValue.split('')
                stringValue.splice(j, 0, '735999')
                stringValue = stringValue.join('')
                stringLength += 6
              }
              if (stringValue[j] === '7' && stringValue[j+1] === '3' && stringValue[j+2] === '5' && stringValue[j+3] === '9' && stringValue[j+4] === '9' && stringValue[j+5] === '9' && (stringValue[j+17] >= '0' && stringValue[j+17] <= '9') && (stringValue[j+16] >= '0' && stringValue[j+16] <= '9') && (stringValue[j+15] >= '0' && stringValue[j+15] <= '9') && (stringValue[j+14] >= '0' && stringValue[j+14] <= '9') && (stringValue[j+13] >= '0' && stringValue[j+13] <= '9') && (stringValue[j+12] >= '0' && stringValue[j+12] <= '9') && (stringValue[j+11] >= '0' && stringValue[j+11] <= '9') && (stringValue[j+10] >= '0' && stringValue[j+10] <= '9') && (stringValue[j+9] >= '0' && stringValue[j+9] <= '9')) {
                i += 17
                j += 18
              } else {
                stringValue = stringValue.split('')
                stringValue.splice(j, 1, '')
                stringValue = stringValue.join('')
              }
            }
          }


          if (stringValue[0] === "7") {
            var numberOfPods = stringValue.length / 18

            if (stringValue.length > 18) {
              for (var x = 0; x < numberOfPods; x++, y += 18, z += 18) {
                sliced = stringValue.slice(z, y)
                temp += '*' + sliced + '\n'

              }
              stringValue = temp
            } else {
              stringValue = '*' + stringValue
            }

          }


          var outputjs = document.getElementById("output")
          if (stringValue === '') {
            outputjs.innerText = 'Inget anläggningsID hittat.'
          } else {
            outputjs.innerText = stringValue
            navigator.clipboard.writeText(stringValue)
          }
        }
      </script>
</body>
</html>
